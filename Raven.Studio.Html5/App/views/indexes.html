<ul class="breadcrumb">
    <li>
        <h3>
            <a href="#databases">
                Databases
            </a>
        </h3>
    </li>
    <li data-bind="with: activeDatabase">
        <a data-bind="text: name"></a>
    </li>
    <li class="active">
        <span>Indexes</span>
    </li>
</ul>

<div class="alert alert-danger">
    TODO: finish implementing this page.
    <ul>
        <li>Make 'New Index' button launch the index editor page. (Doesn't exist yet.)</li>
        <li>Edit index should launch index editor page.</li>
        <li>Recent queries button should populate from local storage</li>
        <li>Delete needs to be implemented</li>
        <li>Expand / collapse needs to be implemented</li>
    </ul>
</div>

<div class="btn-toolbar" role="toolbar">
    <div class="btn-group">
        <button type="button" class="btn btn-primary" data-bind="click: navigateToNewIndex"><i class="fa fa-plus"></i> New Index</button>
        <button type="button" class="btn btn-primary" data-bind="click: navigateToQuery"><i class="fa fa-search"></i> Query</button>
        <div class="btn-group">
            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                Recent Queries <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li><a href="#">TODO: populate this list</a></li>
            </ul>
        </div>
    </div>
    <div class="btn-group">
        <button type="button" class="btn btn-primary" data-bind="click: collapseAll" title="Collapse all index groups"><i class="fa fa-minus-square-o"></i></button>
        <button type="button" class="btn btn-primary" data-bind="click: expandAll" title="Expand all index groups"><i class="fa fa-plus-square-o"></i></button>
    </div>
    <div class="btn-group">
        <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-trash-o"></i> <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
            <li><a href="#">Delete Idle Indexes</a></li>
            <li><a href="#">Delete Disabled Indexes</a></li>
            <li><a href="#">Delete Abandoned Indexes</a></li>
            <li class="divider"></li>
            <li><a href="#">Delete All Indexes</a></li>
        </ul>
    </div>
</div>

<div data-bind="dynamicHeight: { resizeTrigger: window.ravenStudioWindowHeight(), target: 'footer' }">
    <div class="indexes-container panel-group" id="indexesAccordion" data-bind="foreach: indexGroups">
        <div class="index-group panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-bind="attr: { href: '#indexCollapse' + $index() }">
                        <span data-bind="text: entityName"></span>
                        <span class="text-muted" data-bind="text: '(' + indexes.length + ')'"></span>
                    </a>
                </h4>
            </div>
            <div class="index-group-content panel-collapse collapse" data-bind="attr: { id: 'indexCollapse' + $index() }">
                <div class="panel panel-default" style="overflow: visible;">
                    <div class="panel-body" data-bind="foreach: indexes">
                        <div class="panel panel-default" style="overflow: visible;">
                            <div class="panel-body">
                                <span data-bind="text: Name"></span>
                                <span class="text-muted" data-bind="text: '(' + DocsCount + ')'" title="The number of documents affected by this index"></span>
                                <div class="pull-right">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-default dropdown-toggle btn-sm" data-toggle="dropdown" title="Change index lock">
                                            <i class="fa fa-lock"></i> <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" role="menu">
                                            <li><a href="#"><i class="fa fa-unlock"></i> Unlock Index</a></li>
                                            <li><a href="#"><i class="fa fa-lock"></i> Locked (Ignore)</a></li>
                                            <li><a href="#"><i class="fa fa-lock text-danger"></i> Locked (Error)</a></li>
                                        </ul>
                                    </div>
                                    <button class="btn btn-default btn-sm">
                                        <i class="fa fa-pencil"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--<div data-bind="foreach: indexGroups">
        <div class="panel-group">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-bind="text: entityName, attr: { href: '#indexCollapse' + $index() }"></a>
                    </h4>
                </div>
                <div class="panel-collapse collapse" data-bind="attr: { id: 'indexCollapse' + $index() }">
                    <div class="panel-body" data-bind="foreach: indexes">

                        <div class="panel panel-default">
                            <div class="panel-body" data-bind="text: Name">

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>-->
    <!--<div class="indexes-container" data-bind="foreach: indexGroups">
        <div class="panel-group" data-bind="attr: { id: 'indexGroup' + $index() }">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-bind="attr: { href: '#indexGroupCollapse' + $index() }">
                            <i class="fa fa-minus-square-o"></i>
                            <i class="fa fa-plus-square-o"></i>
                            <span data-bind="text: name"></span>
                        </a>
                    </h4>
                </div>
                <div data-bind="attr: { id: '#indexGroupCollapse' + name }" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <div class="well">
                            <i class="fa fa-bolt"></i>
                            <a href="#">Show/Real/Index/Here</a>
                            <span>(742)</span>
                            <span>(abandoned)</span>
                            <div class="btn-group">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" title="Change index lock">
                                    <i class="fa fa-lock"></i> <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" role="menu">
                                    <li><a href="#"><i class="fa fa-unlock"></i> Unlock Index</a></li>
                                    <li><a href="#"><i class="fa fa-lock"></i> Locked (Ignore)</a></li>
                                    <li><a href="#"><i class="fa fa-bug"></i> Locked (Error)</a></li>
                                </ul>
                            </div>
                            <button class="btn btn-default" title="Edit Index"><i class="fa fa-edit"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>-->

</div>