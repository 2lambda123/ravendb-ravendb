<form class="form-horizontal" role="form" data-bind="submit: performMigration">
	<div class="panel panel-default">
		<div class="panel-heading panel-info">
			Server migration
		</div>
		<div class="panel-body">

			<div data-bind="with: targetServer">
				<div class="form-group">
					<label class="col-sm-4 control-label">Target server Url</label>
					<div class="col-sm-7">
						<input required type="text" class="form-control" data-bind="value: url, valueUpdate: 'afterkeydown'" />
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-4 control-label">Credentials</label>
					<div class="col-sm-7">
						<div class="btn-group">
							<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
								<span data-bind="visible: !isUserCredentials() && !isApiKeyCredentials()">None</span>
								<span data-bind="visible: isUserCredentials">User</span>
								<span data-bind="visible: isApiKeyCredentials">API key</span>
								<span class="caret"></span>
							</button>
							<ul class="dropdown-menu" role="menu">
								<li><a href="#" data-bind="click: useNoCredentials">None</a></li>
								<li class="divider"></li>
								<li><a href="#" data-bind="click: useUserCredentials">User</a></li>
								<li><a href="#" data-bind="click: useApiKeyCredentials">API key</a></li>
							</ul>
						</div>
					</div>
				</div>
				<div data-bind="if: isUserCredentials, visible: isUserCredentials">
					<div class="form-group">
						<label class="col-sm-4 control-label">User Name</label>
						<div class="col-sm-7">
							<input required type="text" class="form-control" data-bind="value: username, valueUpdate: 'afterkeydown'" />
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-4 control-label">Password</label>
						<div class="col-sm-7">
							<input required type="text" class="form-control" data-bind="value: password, valueUpdate: 'afterkeydown'" />
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-4 control-label">Domain</label>
						<div class="col-sm-7">
							<input type="text" class="form-control" data-bind="value: domain, valueUpdate: 'afterkeydown'" />
						</div>
					</div>
				</div>
				<div data-bind="if: isApiKeyCredentials, visible: isApiKeyCredentials">
					<div class="form-group">
						<label class="col-sm-4 control-label">API Key</label>
						<div class="col-sm-7">
							<input required type="text" class="form-control" data-bind="value: apiKey, valueUpdate: 'afterkeydown'" />
						</div>
					</div>
				</div>
			</div>

			<hr />


			<div class="clearfix"></div>

			<div class="form-group">
				<label class="col-sm-4 control-label">
					Select databases to migrate <br />
					<button type="button" class="btn btn-link" data-bind="click: toggleSelectAll, visible: hasResources" title="Select all or none">
						<img data-bind="attr: { src: hasAllResourcesSelected() ? 'content/images/checked.png' : hasAnyResourceSelected() ? 'content/images/some-checked.png' : 'content/images/unchecked.png' }" src="content/images/unchecked.png">
					</button> <span style="font-weight: normal">Toggle section</span>
				</label>
				<div class="col-sm-7">
					<div data-bind="foreach: resources">
						<div class="panel panel-default">
							<div class="panel-heading panel-info">
								<label><input type="checkbox" data-bind="checked: $root.selectedResources, value: $data"> <span style="font-weight: normal" data-bind="text:resource.name"></span></label>
							</div>
							<div class="panel-body" data-bind="visible: $root.isSelected($data)">
								Here goes migration customization settings
							</div>
						</div>
					</div>
				</div>

				<div class="form-group">
					<div class="col-sm-offset-4 col-sm-7">
						<button type="submit" class="btn btn-warning" data-bind="enable: hasAnyResourceSelected()"><span class="fa fa-spinner fa-spin"></span> Run migration</button>
					</div>
				</div>


				<hr />
				<pre>Here goes log</pre>
			</div>
		</div>
	</div>
</form>