<style>
    .batchRange rect {
        opacity: 0.3;
    }
    .batchRange rect:hover {
        opacity: 0.5;
    }
    .op {
        cursor: pointer;
    }
    #metricsIndexingGraph text {
         pointer-events: none;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    .op rect {
        opacity: 0.8;
    }
    .op:hover rect {
        opacity: 1;
    }
    .batchRange {
        cursor: pointer;
    }
    .selectable-tooltip .close {
        pointer-events: all;
        -webkit-touch-callout: all;
        -webkit-user-select: all;
        -khtml-user-select: all;
        -moz-user-select: all;
        -ms-user-select: all;
        user-select: all;
    }

</style>

<script type="text/html" id="batch-info-template">
    <div style="padding: 10px">
        <form>
            <button type="button" class="close" data-bind="click: tooltipClose"><i class="fa fa-times"></i></button>
        </form>
        <table class="table table-condensed table-striped" data-bind="with: data">
            <thead>
                <tr>
                    <th>Batch type</th>
                    <th data-bind="text: BatchType"></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Indexes to work on</td>
                    <td>
                        <ul data-bind="foreach: IndexesToWorkOn">
                            <li data-bind="text: $data"></l>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Total document count</td>
                    <td data-bind="text: TotalDocumentCount"></td>
                </tr>
                <tr>
                    <td>Total document size</td>
                    <td data-bind="text: TotalDocumentSize"></td>
                </tr>
                <tr>
                    <td>Started at</td>
                    <td data-bind="text: StartedAt"></td>
                </tr>
                <tr>
                    <td>Total duration</td>
                    <td data-bind="text: TotalDurationMs"></td>
                </tr>
            </tbody>
        </table>
    </div>
</script>

<script type="text/html" id="index-stat-template">
    <div style="padding: 10px">
        <form>
        <button type="button" class="close" data-bind="click: tooltipClose"><i class="fa fa-times"></i></button>
            </form>

        <table class="table table-condensed table-striped" data-bind="with: data">
            <thead>
                <tr>
                    <th>Index stats:</th>
                    <th data-bind="text: indexName"></th>
                </tr>
            </thead>
            <tbody data-bind="with: stats">
                <tr>
                    <td>Operation</td>
                    <td data-bind="text: Operation"></td>
                </tr>
                <tr>
                    <td>Input count</td>
                    <td data-bind="text: InputCount"></td>
                </tr>
                <tr>
                    <td>Items count</td>
                    <td data-bind="text: ItemsCount"></td>
                </tr>
                <tr>
                    <td>Output count</td>
                    <td data-bind="text: OutputCount"></td>
                </tr>
                <tr>
                    <td>Duration</td>
                    <td data-bind="text: Duration"></td>
                </tr>
                <tr>
                    <td>Started</td>
                    <td data-bind="text: Started"></td>
                </tr>
                <tr data-bind="visible: LinqExecutionDurationMs >= 0">
                    <td>Linq execution duration</td>
                    <td data-bind="text: LinqExecutionDurationMs"></td>
                </tr>
                <tr data-bind="visible: LoadDocumentCount >= 0">
                    <td>Load document count</td>
                    <td data-bind="text: LoadDocumentCount"></td>
                </tr>
                <tr data-bind="visible: LoadDocumentDurationMs >= 0">
                    <td>Load document duration</td>
                    <td data-bind="text: LoadDocumentDurationMs"></td>
                </tr>
                <tr data-bind="visible: WritingDocumentsToLuceneDurationMs >= 0">
                    <td>Writing documents<br />to lucene duration</td>
                    <td data-bind="text: WritingDocumentsToLuceneDurationMs"></td>
                </tr>
                <tr data-bind="visible: FlushToDiskDurationMs >= 0">
                    <td>Flash to disk duration</td>
                    <td data-bind="text: FlushToDiskDurationMs"></td>
                </tr>
                <tr>
                    <td>Waiting time since<br /> last batch completed</td>
                    <td data-bind="text: WaitingTimeSinceLastBatchCompleted"></td>
                </tr>
            </tbody>
        </table>
    </div>
</script>

<div>
    <div class="btn-group">
        <button class="btn btn-default" data-bind="click: zoomIn" title="Zoom in"><i class="fa fa-search-plus"></i></button>
        <button class="btn btn-default" data-bind="click: zoomOut" title="Zoom out"><i class="fa fa-search-minus"></i></button>    
    </div>
    <div class="btn-group">
        <select id="visibleIndexesSelector" data-bind="options: allIndexNames, selectedOptions: selectedIndexNames" multiple="multiple"></select>
        <svg transform="translate(0.5,0.5)" preserveAspectRatio="xMinYMin slice" style="display: inline; width: 500px; height: 40px; margin-left: 10px">
            <rect x="10" y="10" width="20" height="20" stroke-width="1" stroke="black" fill="#004080"></rect>
            <text x="35" y="25">Linq execution</text>
            <rect x="130" y="10" width="20" height="20" stroke-width="1" stroke="black" fill="#ffff80"></rect>
            <text x="158" y="25">Load document</text>
            <rect x="265" y="10" width="20" height="20" stroke-width="1" stroke="black" fill="#00ff00"></rect>
            <text x="293" y="25">Write to lucene</text>
            <rect x="390" y="10" width="20" height="20" stroke-width="1" stroke="black" fill="#9f0000"></rect>
            <text x="418" y="25">Flush</text>
        </svg>    
    </div>
    
    
</div>

<section id="metricsContainer" style="width: 100%" data-bind="dynamicHeight: { resizeTrigger: window.ravenStudioWindowHeight(), target: 'footer' }">
    <svg id="metricsIndexingGraph" transform="translate(0.5,0.5)" preserveAspectRatio="xMinYMin slice"></svg>
</section>