<h1>Import Database</h1>
<div class="panel">
    <div class="panel-body">
        <form data-bind="submit: importDb">
            <p>Import data from a .ravendbdump file into the current database.</p>
            <p class="text-warning"><i class="icon-warning"></i> Note: Importing will overwrite any existing documents and indexes.</p>
            <div class="row">
                <div class="col-sm-6">
                    <div class="input-group">
                        <input type="file" id="importDatabaseFilePicker" data-bind="event: { change: $root.fileSelected.bind($root, $element.value) }, disable: isImporting"  value="filename.ravendbdump" class="form-control">
                        <span class="input-group-btn">
                            <button class="btn btn-default btn-success input-group-addon-button"><span class="icon-document"></span> <span>Choose File</span></button>
                        </span>
                    </div>
                </div>
            </div>
            <br />
            <div class="row" data-bind="with: model">
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-sm-6 col-lg-4">
                            <div class="toggle">
                                <input id="toggle1" type="checkbox" data-bind="checked: includeDocuments">
                                <label for="toggle1">
                                    Include Documents
                                </label>
                            </div>
                            <div class="toggle">
                                <input id="toggle2" type="checkbox" data-bind="checked: includeIndexes">
                                <label for="toggle2">
                                    Include Indexes
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-6 col-lg-4">
                            <div class="toggle">
                                <input id="toggle4" type="checkbox" data-bind="checked: includeTransformers">
                                <label for="toggle4">
                                    Include Transformers
                                </label>
                            </div>
                            <div class="toggle">
                                <input id="toggle5" type="checkbox" data-bind="checked: removeAnalyzers">
                                <label for="toggle5">
                                    Remove Analyzers
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />

            <div data-bind="collapse: showAdvancedOptions, with: model">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">Batch size</div>
                                <input class="form-control" type="number" min="0" data-bind="textInput: batchSize">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="toggle">
                    <input id="stripReplicationInformation" type="checkbox" data-bind="checked: stripReplicationInformation">
                    <label for="stripReplicationInformation">
                        Strip replication information from documents metadata
                    </label>
                </div>
                <div class="toggle">
                    <input id="shouldDisableVersioningBundle" type="checkbox" data-bind="checked: shouldDisableVersioningBundle">
                    <label for="shouldDisableVersioningBundle">
                        Disable versioning bundle during import
                    </label>
                </div>
                <div class="toggle">
                    <input id="includeExpiredDocuments" type="checkbox" data-bind="checked: includeExpiredDocuments">
                    <label for="includeExpiredDocuments">
                        Include Expired documents
                    </label>
                </div>

                <div class="form-group">
                    <div class="toggle">
                        <input id="useTransformScript" type="checkbox" data-bind="checked: $root.showTransformScript">
                        <label for="useTransformScript">
                            Use Transform script <a class="text-info" target="_blank" id="transformScriptPopover" href="#">
                                <span class="icon-help"></span>
                            </a>
                        </label>
                    </div>
                    <div data-bind="collapse: $root.showTransformScript">
                        <pre style="height: 200px;" data-bind="aceEditor: { code: transformScript, lang: 'ace/mode/javascript' }"></pre>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label">Command</label>
                    <div class="input-group">
                        <span class="input-group-btn">
                            <button class="btn btn-default btn-sm"><span class="icon-copy"></span> <span>Copy to clipboard</span></button>
                        </span>
                        <input onClick="this.select();" class="form-control input-sm" readonly value='Raven.Smuggler out http://live-test.ravendb.net raven.dump --operate-on-types=Documents,Indexes,Transformers --database="Media" --batch-size=1024 --excludeexpired'>
                    </div>
                </div>
            </div>
            <hr />
            
            <div class="progress" data-bind="visible: isUploading()">
                <div class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" data-bind="style: { width: uploadStatus() + '%' }"> <span class="sr-only" data-bind="text: uploadStatus() + '%'"></span> </div>
            </div>

            <button class="btn btn-info" type="button" data-bind="click: showAdvancedOptions.toggle.bind(showAdvancedOptions)">
                Advanced
            </button>
            <button class="btn btn-success" type="submit" download data-bind="css: { 'btn-spinner': isImporting() }"><span class="icon-import"></span> <span>Import Database</span></button>
        </form>
    </div>
</div>